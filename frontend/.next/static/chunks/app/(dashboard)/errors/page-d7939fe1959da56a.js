(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{1834:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4138).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2555:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(9835),a=s(5931),l=s(7472),c=s(2932),i=s(8863),d=s(1834),n=s(3700),o=s(9354);function x(){let[e,t]=(0,a.useState)([]),[s,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(""),[p,u]=(0,a.useState)("all");(0,a.useEffect)(()=>{y()},[]);let y=async()=>{x(!0);try{let{data:e,error:s}=await o.N.from("error_logs").select("*").order("created_at",{ascending:!1}).limit(100);s?console.error("Erro ao carregar logs de erro:",s):t(e||[])}catch(e){console.error("Erro ao carregar logs de erro:",e)}finally{x(!1)}},g=e.filter(e=>{let t=e.error_message.toLowerCase().includes(m.toLowerCase())||e.error_type.toLowerCase().includes(m.toLowerCase())||e.platform.toLowerCase().includes(m.toLowerCase()),s="all"===p||e.platform.toLowerCase()===p.toLowerCase();return t&&s}),f=Array.from(new Set(e.map(e=>e.platform)));return s?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Erros"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Logs de erros e falhas no processamento"})]}),(0,r.jsxs)("button",{onClick:y,className:"btn-primary",children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:g.length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total Erros"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:g.filter(e=>e.status_code&&e.status_code>=500).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Erros do Servidor"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:g.filter(e=>e.status_code&&e.status_code>=400&&e.status_code<500).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Erros do Cliente"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:g.filter(e=>"validation"===e.error_type.toLowerCase()).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Erros de Valida\xe7\xe3o"})]})})]}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-content",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por erro, tipo ou plataforma...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",value:m,onChange:e=>h(e.target.value)})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{className:"w-full sm:w-auto px-4 py-3 border border-gray-200 rounded-xl bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",value:p,onChange:e=>u(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"Todas as Plataformas"}),f.map(e=>(0,r.jsx)("option",{value:e,children:e.toUpperCase()},e))]})})]})})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-content p-0",children:0===g.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)(i.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhum erro encontrado"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:0===e.length?"\xd3timo! N\xe3o h\xe1 erros registrados.":"Tente ajustar os filtros."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Erro"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plataforma"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Code"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(i.A,{className:"h-4 w-4 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:e.error_message}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id.slice(0,8),"..."]}),e.endpoint&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Endpoint: ",e.endpoint]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e.toLowerCase()){case"validation":return"bg-yellow-100 text-yellow-800";case"authentication":return"bg-red-100 text-red-800";case"database":return"bg-purple-100 text-purple-800";case"network":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.error_type)),children:e.error_type})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e.toLowerCase()){case"kiwify":return"bg-green-100 text-green-800";case"dmg":return"bg-blue-100 text-blue-800";case"cademi":return"bg-purple-100 text-purple-800";case"voomp":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.platform)),children:e.platform.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.status_code?(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(e.status_code>=500?"bg-red-100 text-red-800":e.status_code>=400?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status_code}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 text-gray-400 mr-2"}),new Date(e.created_at).toLocaleString("pt-BR")]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsx)("button",{onClick:()=>{console.log("Detalhes do erro:",{id:e.id,error_message:e.error_message,error_type:e.error_type,platform:e.platform,payload:e.payload,created_at:e.created_at}),alert("Detalhes do erro logados no console")},className:"text-blue-600 hover:text-blue-800",children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})})]},e.id))})]})})})})]})}},2932:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4138).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3700:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4138).A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},4138:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5931),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},l=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{color:c="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:n,children:o,...x}=s;return(0,r.createElement)("svg",{ref:l,...a,width:i,height:i,stroke:c,strokeWidth:n?24*Number(d)/Number(i):d,className:"lucide lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),...x},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...(Array.isArray(o)?o:[o])||[]])});return s.displayName="".concat(e),s}},7472:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4138).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7760:(e,t,s)=>{Promise.resolve().then(s.bind(s,2555))},8863:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4138).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9354:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(338).UU)("https://camdhrxwfqkxamdxyviv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhbWRocnh3ZnFreGFtZHh5dml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3Nzk3MTIsImV4cCI6MjA3MjM1NTcxMn0.NtGdZqfHYHUCjAmOrtrxD4a4pb2riyhjAbQ26aGa-n0")}},e=>{e.O(0,[338,900,341,358],()=>e(e.s=7760)),_N_E=e.O()}]);