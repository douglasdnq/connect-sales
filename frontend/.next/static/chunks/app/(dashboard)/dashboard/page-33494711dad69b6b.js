(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{2646:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(4138).A)("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]])},3880:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(9835),r=a(5931),l=a(9588),n=a(4138);let c=(0,n.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),i=(0,n.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=a(7568),o=a(2646);let x=(0,n.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var m=a(6039);let h=(0,n.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var u=a(6958),g=a(1077);function v(){var e;let[s,a]=(0,r.useState)(null),[n,v]=(0,r.useState)(!0),[j,y]=(0,r.useState)(new Date().getMonth()+1),[N,f]=(0,r.useState)(new Date().getFullYear()),p=(0,l.useRouter)(),b=new Date(N,j-1,1).toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),w=j===new Date().getMonth()+1&&N===new Date().getFullYear();(0,r.useEffect)(()=>{!async function(){try{let{data:e,error:s}=await (0,g.$c)(j,N);s&&!s.includes("Meta n\xe3o encontrada")&&console.error("Erro ao carregar metas:",s);let{data:t,error:r}=await (0,g.DW)(j,N);r&&console.error("Erro ao carregar ascens\xf5es:",r);let l=await (0,g.W6)(N),n={dzaSales:((null==e?void 0:e.current.dza_sales)||0)+((null==e?void 0:e.current.mentoria_sales)||0),dzaRevenue:((null==e?void 0:e.current.dza_revenue)||0)+((null==e?void 0:e.current.mentoria_revenue)||0),kiwifySales:(null==e?void 0:e.current.dza_sales)||0,kiwifyRevenue:(null==e?void 0:e.current.dza_revenue)||0,mentoriaSales:(null==e?void 0:e.current.mentoria_sales)||0,mentoriaRevenue:(null==e?void 0:e.current.mentoria_revenue)||0,conversions:t||0,conversionRate:(null==e?void 0:e.current.dza_sales)&&e.current.dza_sales>0?(t||0)/e.current.dza_sales*100:0,goalProgress:e,monthlyRevenue:l};a(n)}catch(e){console.error("Erro ao carregar dados do dashboard:",e)}finally{v(!1)}}()},[j,N]);let k=e=>{let s=j,a=N;"next"===e?12===j?(s=1,a=N+1):s=j+1:1===j?(s=12,a=N-1):s=j-1,y(s),f(a)},_=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);if(n)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!s)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Erro ao carregar dados"}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Tentar novamente"})]})});let A=(()=>{if(!w)return null;let e=new Date;return Math.max(0,new Date(e.getFullYear(),e.getMonth()+1,0).getDate()-e.getDate())})();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:"An\xe1lise completa de performance e metas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>k("prev"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"M\xeas anterior",children:(0,t.jsx)(c,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"px-4 py-2 bg-white border border-gray-200 rounded-lg",children:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:b})}),(0,t.jsx)("button",{onClick:()=>k("next"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Pr\xf3ximo m\xeas",children:(0,t.jsx)(i,{className:"h-4 w-4"})})]}),w&&null!==A&&(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:[A," ",1===A?"dia restante":"dias restantes"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-content",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Totais"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.dzaSales}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:_(s.dzaRevenue)})]})]})})}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-content",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(x,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Vendas DZA"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.kiwifySales}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:_(s.kiwifyRevenue)})]})]})})}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-content",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"h-6 w-6 text-purple-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Mentorias"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.mentoriaSales}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:_(s.mentoriaRevenue)})]})]})})}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-content",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(h,{className:"h-6 w-6 text-orange-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Taxa Convers\xe3o"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.conversionRate.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[s.conversions," ascens\xf5es"]})]})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-content",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Faturamento por Fonte"}),(0,t.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,t.jsx)("div",{className:"relative w-48 h-48",children:(0,t.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[(0,t.jsx)("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#3B82F6",strokeWidth:"20",strokeDasharray:"".concat(s.kiwifyRevenue/s.dzaRevenue*188.5," 188.5"),strokeDashoffset:"0",transform:"rotate(-90 50 50)"}),(0,t.jsx)("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#8B5CF6",strokeWidth:"20",strokeDasharray:"".concat(s.mentoriaRevenue/s.dzaRevenue*188.5," 188.5"),strokeDashoffset:"-".concat(s.kiwifyRevenue/s.dzaRevenue*188.5),transform:"rotate(-90 50 50)"})]})})}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"DZA"})]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:_(s.kiwifyRevenue)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Mentoria"})]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:_(s.mentoriaRevenue)})]})]})]})}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-content",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progresso das Metas"}),(null==(e=s.goalProgress)?void 0:e.goal)?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Vendas DZA"}),(0,t.jsxs)("span",{className:"font-medium",children:[s.goalProgress.progress.dza_sales.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(Math.min(100,s.goalProgress.progress.dza_sales),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[s.goalProgress.current.dza_sales," / ",s.goalProgress.goal.dza_sales_target]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Vendas Mentoria"}),(0,t.jsxs)("span",{className:"font-medium",children:[s.goalProgress.progress.mentoria_sales.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(Math.min(100,s.goalProgress.progress.mentoria_sales),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[s.goalProgress.current.mentoria_sales," / ",s.goalProgress.goal.mentoria_sales_target]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Receita Global"}),(0,t.jsxs)("span",{className:"font-medium",children:[s.goalProgress.progress.global_revenue.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(Math.min(100,s.goalProgress.progress.global_revenue),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[_(s.goalProgress.current.global_revenue)," / ",_(s.goalProgress.goal.global_revenue_target)]})]})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(m.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Nenhuma meta definida para este m\xeas"}),(0,t.jsx)("button",{onClick:()=>p.push("/goals"),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Definir Metas"})]})]})})]}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-content",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Faturamento Mensal ",N]}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)("div",{className:"flex items-end justify-between h-full gap-2",children:s.monthlyRevenue.map(e=>{let a=Math.max(...s.monthlyRevenue.map(e=>e.revenue)),r=a>0?e.revenue/a*100:0,l=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];return(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>y(e.month),children:[(0,t.jsx)("div",{className:"w-full rounded-t transition-all duration-300 ".concat(e.month===j?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"),style:{height:"".concat(r,"%"),minHeight:e.revenue>0?"4px":"0px"},title:"".concat(l[e.month-1],": ").concat(_(e.revenue)," - Clique para selecionar")}),(0,t.jsx)("span",{className:"text-xs mt-2 transition-colors ".concat(e.month===j?"font-semibold text-blue-600":"text-gray-500 hover:text-gray-700"),children:l[e.month-1]})]},e.month)})})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsx)("button",{onClick:()=>p.push("/goals"),className:"card hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"card-content text-center",children:[(0,t.jsx)(m.A,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Gerenciar Metas"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Definir e acompanhar metas"})]})}),(0,t.jsx)("button",{onClick:()=>p.push("/orders"),className:"card hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"card-content text-center",children:[(0,t.jsx)(x,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Ver Pedidos"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"An\xe1lise detalhada de vendas"})]})}),(0,t.jsx)("button",{onClick:()=>p.push("/customers"),className:"card hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"card-content text-center",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Jornada do Cliente"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Convers\xe3o DZA → Mentoria"})]})})]})]})}},4355:(e,s,a)=>{Promise.resolve().then(a.bind(a,3880))},6039:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(4138).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},6958:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(4138).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7568:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(4138).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9588:(e,s,a)=>{"use strict";var t=a(5604);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})}},e=>{e.O(0,[338,49,900,341,358],()=>e(e.s=4355)),_N_E=e.O()}]);