(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{1834:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2178:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(9835),a=t(5931);let l=(0,t(4138).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var c=t(4141),d=t(7568),i=t(7472),n=t(2932),o=t(1834),x=t(3700),m=t(1077);function h(){let[e,s]=(0,a.useState)([]),[t,h]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[y,g]=(0,a.useState)("all"),v=async()=>{h(!0);try{let{data:e,error:t}=await (0,m.JO)(100);t?console.error("Erro ao carregar eventos:",t):(console.log("Eventos carregados:",e),s(e||[]))}catch(e){console.error("Erro ao carregar eventos:",e)}finally{h(!1)}};(0,a.useEffect)(()=>{v()},[]);let j=e.filter(e=>{var s,t;let r=e.event_type.toLowerCase().includes(p.toLowerCase())||e.platform.toLowerCase().includes(p.toLowerCase())||(null==(s=e.order_id)?void 0:s.toLowerCase().includes(p.toLowerCase()))||(null==(t=e.customer_email)?void 0:t.toLowerCase().includes(p.toLowerCase())),a="all"===y||"success"===y&&e.processed&&!e.error_message||"error"===y&&(!e.processed||e.error_message)||"pending"===y&&!e.processed&&!e.error_message;return r&&a});return t?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Eventos"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Hist\xf3rico de eventos de webhooks recebidos"})]}),(0,r.jsxs)("button",{onClick:v,className:"btn-primary",children:[(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:j.length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total Eventos"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:j.filter(e=>e.processed&&!e.error_message).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Sucessos"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:j.filter(e=>!e.processed&&!e.error_message).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Pendentes"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:j.filter(e=>e.error_message).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Erros"})]})})]}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-content",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por evento, plataforma, pedido ou email...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",value:p,onChange:e=>u(e.target.value)})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{className:"w-full sm:w-auto px-4 py-3 border border-gray-200 rounded-xl bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",value:y,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"Todos os Status"}),(0,r.jsx)("option",{value:"success",children:"Sucesso"}),(0,r.jsx)("option",{value:"pending",children:"Pendente"}),(0,r.jsx)("option",{value:"error",children:"Erro"})]})})]})})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-content p-0",children:0===j.length?(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhum evento encontrado"})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evento"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plataforma"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pedido"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.event_type}),e.customer_email&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.customer_email})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e.toLowerCase()){case"kiwify":return"bg-green-100 text-green-800";case"dmg":return"bg-blue-100 text-blue-800";case"cademi":return"bg-purple-100 text-purple-800";case"voomp":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.platform)),children:e.platform.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.order_id?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.order_id}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id.slice(0,8),"..."]})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[e.error_message?(0,r.jsx)(l,{className:"h-4 w-4 text-red-500"}):e.processed?(0,r.jsx)(c.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(d.A,{className:"h-4 w-4 text-yellow-500"}),(0,r.jsx)("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(e.error_message?"bg-red-100 text-red-800":e.processed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.error_message?"Erro":e.processed?"Sucesso":"Pendente"})]}),e.error_message&&(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 truncate max-w-xs",children:e.error_message})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 text-gray-400 mr-2"}),new Date(e.created_at).toLocaleString("pt-BR")]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsx)("button",{onClick:()=>{console.log("Payload do evento:",e.payload),alert("Payload do evento logado no console")},className:"text-blue-600 hover:text-blue-800",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})})]},e.id))})]})})})})]})}},2932:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3700:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},3818:(e,s,t)=>{Promise.resolve().then(t.bind(t,2178))},4141:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},7472:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7568:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4138).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}},e=>{e.O(0,[338,49,900,341,358],()=>e(e.s=3818)),_N_E=e.O()}]);